"use strict";(self.webpackChunkbasic_lazy_app=self.webpackChunkbasic_lazy_app||[]).push([[928],{928:(e,s,i)=>{i.r(s),i.d(s,{default:()=>O});var t=i(727),l=(i(43),i(903)),n=i(579);const d=()=>(0,n.jsxs)("div",{className:"adminsListWrapper usersList",children:[(0,n.jsx)("h3",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u0434\u043c\u0438\u043d\u043e\u0432"}),(0,n.jsx)("ul",{})]}),r=e=>{let{client:s}=e;Object.keys(s).filter((e=>!e.match(/_/g)));return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("li",{children:(0,n.jsx)(t.N_,{to:"/clients/"+s.id,children:(0,n.jsxs)("div",{className:"container border",children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-lg-4 col-md-6 border",children:null!==s&&void 0!==s&&s.firstname||null!==s&&void 0!==s&&s.lastname?(0,n.jsxs)("p",{children:[s.firstname," ",s.lastname]}):(0,n.jsx)("p",{children:s.email})}),(0,n.jsx)("div",{className:"col-lg-3 col-md-6 border",children:(0,n.jsx)("p",{className:"",children:"\u0434\u0435\u043f\u043e\u0437\u0438\u0442"})}),(0,n.jsx)("div",{className:"col-lg-3 col-md-12 border",children:(null===s||void 0===s?void 0:s.createdAt)&&(0,n.jsx)("div",{className:"border",children:new Date(s.createdAt).toLocaleDateString("ru-RU")})}),(0,n.jsx)("div",{className:"col-lg-2 bg-danger"})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-lg-7 border",children:(0,n.jsx)("p",{children:"KOSH"})}),(0,n.jsx)("div",{className:"col-lg-3 col-md-12 border",children:(null===s||void 0===s?void 0:s.updatedAt)&&(0,n.jsx)("div",{className:"border",children:new Date(s.createdAt).toLocaleDateString("ru-RU")})})]})]})})})})};var a=i(17),c=i(99),o=i(627);const h=(0,a.pU)({}),j=h.getInitialState(),x=o.l.injectEndpoints({endpoints:e=>({getClients:e.query({query:()=>({url:"/clients",validateStatus:(e,s)=>200===e.status&&!s.isError}),transformResponse:e=>{const s=e.map((e=>(e.id=e._id,e)));return h.setAll(j,s)},providesTags:(e,s,i)=>null!==e&&void 0!==e&&e.ids?[{type:"Client",id:"LIST"},...e.ids.map((e=>({type:"Client",id:e})))]:[{type:"Client",id:"LIST"}]}),registerClient:e.mutation({query:e=>({url:"/register",method:"POST",body:{...e}}),invalidatesTags:[{type:"Client",id:"LIST"}]}),addNewClient:e.mutation({query:e=>({url:"/clients",method:"POST",body:{...e}}),invalidatesTags:[{type:"Client",id:"LIST"}]}),updateClient:e.mutation({query:e=>({url:"/clients",method:"PATCH",body:{...e}}),invalidatesTags:(e,s,i)=>[{type:"Client",id:i.id}]}),deleteClient:e.mutation({query:e=>{let{id:s}=e;return{url:"/clients",method:"DELETE",body:{id:s}}},invalidatesTags:(e,s,i)=>[{type:"Client",id:i.id}]})})}),{useGetClientsQuery:m,useRegisterClientMutation:u,useAddNewClientMutation:p,useUpdateClientMutation:g,useDeleteClientMutation:v}=x,C=x.endpoints.getClients.select(),y=(0,c.Mz)(C,(e=>e.data)),{selectAll:b,selectById:N,selectIds:A}=h.getSelectors((e=>{var s;return null!==(s=y(e))&&void 0!==s?s:j})),L=()=>{const{data:e,isLoading:s,isError:i,isFetching:t,isSuccess:l}=m("clientsList",{pollingInterval:6e4,refetchOnFocus:!0,refetchOnMountOrArgChange:!0});return console.log("load "+s,"err "+i,"succ "+l),console.log(e),(0,n.jsxs)("div",{className:"clietnsListWrapper usersList",children:[(0,n.jsx)("h3",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"}),(0,n.jsx)("ul",{children:!s&&l&&e.ids.map((s=>(console.log(""),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{client:{...e.entities[s]}},s),(0,n.jsx)("hr",{})]}))))})]})},q=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Dashboard"}),(0,n.jsxs)("div",{className:"dashboardWrapper",children:[(0,n.jsx)(L,{}),(0,n.jsx)(d,{})]})]}),S=()=>{const{username:e}=(0,l.A)();return(0,n.jsx)("main",{children:(0,n.jsx)(q,{})})};var T=i(140),f=i(834);const _=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.A,{}),(0,n.jsx)("div",{children:(0,n.jsx)(t.sv,{})}),(0,n.jsx)(f.A,{})]}),w=()=>(0,n.jsx)("div",{children:"ClientsListPage"}),I=e=>{const{id:s}=(0,t.g)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:"ClientAccount"}),(0,n.jsxs)("p",{children:["id: ",s]}),(0,n.jsx)(t.N_,{to:"/clients",children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u043a\u043b\u0435\u043d\u0442\u043e\u0432"})]})},D=()=>(0,n.jsx)("div",{children:"AdminsListPage"}),F=()=>(0,n.jsx)("div",{children:"AdminAccount"});i(111);const O=()=>(console.log("adminapp"),(0,n.jsx)(t.BV,{children:(0,n.jsxs)(t.qh,{path:"/*",element:(0,n.jsx)(_,{}),children:[(0,n.jsx)(t.qh,{index:!0,element:(0,n.jsx)(t.N_,{to:"/home",children:"Home"})}),(0,n.jsx)(t.qh,{path:"home",element:(0,n.jsx)(S,{})}),(0,n.jsx)(t.qh,{path:"clients",element:(0,n.jsx)(w,{})}),(0,n.jsx)(t.qh,{path:"clients/:id",element:(0,n.jsx)(I,{})}),(0,n.jsx)(t.qh,{path:"admins",element:(0,n.jsx)(D,{})}),(0,n.jsx)(t.qh,{path:"admins/:username",element:(0,n.jsx)(F,{})}),(0,n.jsx)(t.qh,{path:"*",element:(0,n.jsx)(t.C5,{to:"/home",replace:!0})})]})}))}}]);
//# sourceMappingURL=928.f2b56b9d.chunk.js.map