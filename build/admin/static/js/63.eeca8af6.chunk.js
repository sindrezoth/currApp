"use strict";(self.webpackChunkbasic_lazy_app=self.webpackChunkbasic_lazy_app||[]).push([[63],{63:(e,s,r)=>{r.r(s),r.d(s,{default:()=>T});var n=r(727),a=r(43),t=r(903),l=r(3),i=r(579);const c=e=>{let{admin:s}=e;const r=(0,t.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("li",{children:(0,i.jsx)(n.N_,{to:"/admins/"+s.username,children:(0,i.jsx)("div",{className:"container border",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsxs)("div",{className:"col-lg-12 col-md-12 d-flex justify-content-between border",children:[(0,i.jsx)("span",{children:s.username}),s.username===r.username&&(0,i.jsx)("span",{children:"\u0432\u044b"})]})})})})})})};var d=r(17),o=r(99),m=r(627);const u=(0,d.pU)({}),h=u.getInitialState(),x=m.l.injectEndpoints({endpoints:e=>({getAdmins:e.query({query:()=>"/admins",validateStatus:(e,s)=>200===e.status&&!s.isError,transformResponse:e=>{const s=e.map((e=>(e.id=e._id,e)));return u.setAll(h,s)},providesTags:(e,s,r)=>null!==e&&void 0!==e&&e.ids?[{type:"Admin",id:"LIST"},...e.ids.map((e=>({type:"Admin",id:e})))]:[{type:"Admin",id:"LIST"}]}),addNewAdmin:e.mutation({query:e=>({url:"/admins",method:"POST",body:{...e}}),invalidatesTags:[{type:"Admin",id:"LIST"}]}),updateAdmin:e.mutation({query:e=>({url:"/admins",method:"PATCH",body:{...e}}),invalidatesTags:(e,s,r)=>[{type:"Admin",id:r.id}]}),deleteAdmin:e.mutation({query:e=>{let{id:s}=e;return{url:"/admins",method:"DELETE",body:{id:s}}},invalidatesTags:(e,s,r)=>[{type:"Admin",id:r.id}]})})}),{useGetAdminsQuery:p,useAddNewAdminMutation:j,useUpdateAdminMutation:v,useDeleteAdminMutation:g}=x,f=x.endpoints.getAdmins.select(),b=(0,o.Mz)(f,(e=>e.data)),{selectAll:N,selectById:y,selectIds:k}=u.getSelectors((e=>{var s;return null!==(s=b(e))&&void 0!==s?s:h})),w=()=>{const e=(0,t.A)(),s=(0,l.d4)(N);return console.log(s),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h3",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u0434\u043c\u0438\u043d\u043e\u0432"}),(0,i.jsx)("ul",{children:null===s||void 0===s?void 0:s.map((e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{admin:{...e}},e.id),(0,i.jsx)("hr",{})]})))}),e.roles.includes("superadmin")&&(0,i.jsx)(n.N_,{to:"/admins/create",className:"btn btn-primary border rounded-50",name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0430",children:"+"})]})},A=e=>{let{client:s}=e;Object.keys(s).filter((e=>!e.match(/_/g)));return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("li",{children:(0,i.jsx)(n.N_,{to:"/clients/"+s.id,children:(0,i.jsxs)("div",{className:"container border",children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-4 col-md-6 border",children:null!==s&&void 0!==s&&s.firstname||null!==s&&void 0!==s&&s.lastname?(0,i.jsxs)("p",{children:[s.firstname," ",s.lastname]}):(0,i.jsx)("p",{children:s.email})}),(0,i.jsx)("div",{className:"col-lg-3 col-md-6 border",children:(0,i.jsx)("p",{className:"",children:"\u0434\u0435\u043f\u043e\u0437\u0438\u0442"})}),(0,i.jsx)("div",{className:"col-lg-3 col-md-12 border",children:(null===s||void 0===s?void 0:s.createdAt)&&(0,i.jsx)("div",{className:"border",children:new Date(s.createdAt).toLocaleDateString("ru-RU")})}),(0,i.jsx)("div",{className:"col-lg-2 bg-danger"})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-7 border",children:(0,i.jsx)("p",{children:"KOSH"})}),(0,i.jsx)("div",{className:"col-lg-3 col-md-12 border",children:(null===s||void 0===s?void 0:s.updatedAt)&&(0,i.jsx)("div",{className:"border",children:new Date(s.createdAt).toLocaleDateString("ru-RU")})})]})]})})})})};var _=r(477);const S=()=>{const e=(0,l.d4)(_.Ir);return(0,i.jsx)(i.Fragment,{children:null===e||void 0===e?void 0:e.map((e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A,{client:{...e}},e.id),(0,i.jsx)("hr",{})]})))})},O=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{children:"Dashboard"}),(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-8 border border-dark",children:(0,i.jsx)(S,{})}),(0,i.jsx)("div",{className:"col-lg-4 border border-dark",children:(0,i.jsx)(w,{})})]})})]}),C=()=>{const{username:e}=(0,t.A)();return(0,i.jsx)("main",{children:(0,i.jsx)(O,{})})};var F=r(140),q=r(834);const D=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.A,{}),(0,i.jsx)("div",{children:(0,i.jsx)(n.sv,{})}),(0,i.jsx)(q.A,{})]}),E=()=>(0,i.jsx)("div",{children:"ClientsListPage"}),L=()=>{const{id:e}=(0,n.g)(),s=(0,t.A)(),r=(0,l.d4)((s=>(0,_.yf)(s,e))),c=(0,l.d4)((e=>N(e))),[d,o]=(0,a.useState)("");let{firstname:m,lastname:u,email:h,phone:x,createdAt:p,updatedAt:j}={};const[v,{isLoading:g,isError:f,isUninitialized:b,isSuccess:y}]=(0,_.fB)();(0,a.useEffect)((()=>{o(r.trader)}),[r]),console.log(d,r.trader);const k=d&&(r&&!r.trader||r&&r.trader&&r.trader!==d);return console.log(f),(0,i.jsx)("div",{className:"container ",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-12 container",children:r&&(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-8 container",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-4 border border-dark overflow-hidden",children:(0,i.jsx)("div",{className:"col-lg-12 text-dark h5",children:r.firstname||r.lastname?[r.firstname,r.lastname].join(" "):r.email})}),(0,i.jsx)("div",{className:"col-lg-4 border border-dark",children:(0,i.jsx)("div",{className:"col-lg-12 text-dark h5",children:"\u0434\u0435\u043f\u043e\u0437\u0438\u0442"})}),(0,i.jsx)("div",{className:"col-lg-4 container border border-dark",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-6 text-dark h5",children:"\u0441\u043e\u0437\u0434\u0430\u043d:  "}),(0,i.jsx)("div",{className:"col-lg-6 text-dark",children:p?new Date(p).toLocaleDateString("ru-RU"):"\u043d\u0435\u0442 \u0434\u0430\u043d\u044b\u0445"})]})}),(0,i.jsx)("div",{className:"col-lg-8 border border-dark",children:"KOSH"}),(0,i.jsx)("div",{className:"container border border-dark col-lg-4",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-lg-6 text-dark h5",children:"\u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d:  "}),(0,i.jsx)("div",{className:"col-lg-6 text-dark",children:j?new Date(p).toLocaleDateString("ru-RU"):"\u043d\u0435\u0442 \u0434\u0430\u043d\u044b\u0445"})]})}),(0,i.jsx)("div",{className:"bg-primary col-lg-12",children:(0,i.jsx)("pre",{children:"graph\ngraph\ngraph\ngraph\ngraph\ngraph\ngraph\ngraph\ngraph\n"})}),(0,i.jsx)("div",{className:"bg-warning col-lg-12",children:"btns"})]})}),(0,i.jsx)("div",{className:"col-lg-4 container",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("span",{className:"h5",children:["ID: ",e]}),(0,i.jsx)("div",{className:"col-lg-6 text-dark h5",children:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d:  "}),(0,i.jsx)("div",{className:"col-lg-6 text-dark",children:x}),(0,i.jsx)("div",{className:"col-lg-6 text-dark h5",children:"\u043f\u043e\u0447\u0442\u0430: "}),(0,i.jsx)("div",{className:"col-lg-6 text-dark",children:h}),(0,i.jsx)("div",{className:"col-lg-3",children:(0,i.jsx)("div",{className:"text-dark h5",children:"\u0442\u0440\u0435\u0439\u0434\u0435\u0440: "})}),(0,i.jsx)("div",{className:"col-lg-9",children:(0,i.jsxs)("select",{onChange:e=>{console.log(e.target.value),o(e.target.value)},value:r.trader,className:"form-select","aria-label":"\u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0442\u0440\u0435\u0434\u0435\u0440\u0430",children:[(0,i.jsx)("option",{value:"",children:"\u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0442\u0440\u0435\u0439\u0434\u0435\u0440\u0430"}),c.map(((e,r)=>(0,i.jsxs)("option",{style:{border:"1px solid red"},className:(e.username===s.username?"text-primary":"")+(r%2==0&&" bg-secondary"),value:e.username,children:[e.username," ",e.username===s.username?"\u0432\u044b":""]},`option${e.username}`)))]})}),(0,i.jsx)("div",{className:"col-lg-12",children:(0,i.jsx)("button",{onClick:e=>{e.preventDefault(),v({...r,trader:d})},className:"btn btn-primary",disabled:!k,children:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})})]})})]})}),(0,i.jsx)(n.N_,{to:"/admin/home",children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u043a\u043b\u0435\u043d\u0442\u043e\u0432"})]})})},P=()=>(0,i.jsx)("div",{children:"AdminsListPage"}),M=()=>(0,i.jsx)("div",{children:"AdminAccount"}),R=()=>{const{roles:e}=(0,t.A)(),s=(0,n.Zp)();(0,a.useEffect)((()=>{e.includes("superadmin")||s("/home")}),[e]);const[r,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[o,m]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1),[x,{isLoading:p,isSuccess:v,isError:g,error:f}]=j(),b=r.length>=4&&c.length>=8;console.log(b);return(0,i.jsx)("form",{onSubmit:e=>(async e=>{if(e.preventDefault(),console.log(r,c,o,u),b)try{const{success:e}=await x({username:r,password:c,adminRole:o,superadminRole:u}).unwrap();l(""),d(""),m(!0),h(!1),s("/home")}catch(n){console.log(n),d("")}})(e),className:"form container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsxs)("div",{className:"col-lg-4",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"username",children:"username"}),(0,i.jsx)("input",{value:r,onChange:e=>l(e.target.value),id:"username",type:"text",autoComplete:"off",required:!0,className:`form-control floating ${r.length&&(r.length>=4?"is-valid":"is-invalid")}`})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"password",children:"password"}),(0,i.jsx)("input",{value:c,onChange:e=>d(e.target.value),id:"password",type:"text",autoComplete:"off",required:!0,required:!0,className:`form-control floating mb-3 ${c.length&&(c.length>=8?"is-valid":"is-invalid")}`})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{checked:u||o,onChange:e=>m(e.target.checked),id:"checkAdmin",type:"checkbox",disabled:!0,className:"form-check-input"}),(0,i.jsx)("label",{htmlFor:"checkAdmin",className:"form-check-label",children:"admin"})]}),(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{checked:u,onChange:e=>h(e.target.checked),id:"checkSuperadmin",type:"checkbox",className:"form-check-input"}),(0,i.jsx)("label",{htmlFor:"checkSuperadmin",className:"form-check-label",children:"superadmin"})]})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-warning mt-3",disabled:!b,children:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c"})]})})})};r(111);const T=()=>(0,i.jsx)(n.BV,{children:(0,i.jsxs)(n.qh,{path:"/*",element:(0,i.jsx)(D,{}),children:[(0,i.jsx)(n.qh,{index:!0,element:(0,i.jsx)(n.N_,{to:"/home",children:"Home"})}),(0,i.jsx)(n.qh,{path:"home",element:(0,i.jsx)(C,{})}),(0,i.jsx)(n.qh,{path:"clients",element:(0,i.jsx)(E,{})}),(0,i.jsx)(n.qh,{path:"clients/:id",element:(0,i.jsx)(L,{})}),(0,i.jsx)(n.qh,{path:"admins",element:(0,i.jsx)(P,{})}),(0,i.jsx)(n.qh,{path:"admins/:username",element:(0,i.jsx)(M,{})}),(0,i.jsx)(n.qh,{path:"admins/create",element:(0,i.jsx)(R,{})}),(0,i.jsx)(n.qh,{path:"*",element:(0,i.jsx)(n.C5,{to:"/",replace:!0})})]})})},140:(e,s,r)=>{r.d(s,{A:()=>c});var n=r(727),a=r(43),t=r(903),l=r(953),i=(r(840),r(579));const c=()=>{const{username:e,roles:s}=(0,t.A)(),r=(0,n.Zp)(),[c,d]=(0,a.useState)({isOpen:!1}),[o,{isLoading:m,isSuccess:u,isError:h,error:x}]=(0,l.ZD)();return(0,a.useEffect)((()=>{u&&(console.log("sooo?"),setPersist(!1))}),[u,r]),(0,i.jsxs)("header",{children:[(0,i.jsx)(n.N_,{to:"/",children:(0,i.jsx)("h1",{children:"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"})}),e?(0,i.jsx)("nav",{children:(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:(0,i.jsx)(n.N_,{to:"/home",children:"Home"})})})}):null,e?c.isOpen?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>d((e=>({...e,isOpen:!e.isOpen}))),children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),(0,i.jsx)("button",{className:"icon-button",title:"\u0412\u044b\u0439\u0442\u0438",onClick:()=>{o()},children:"\u0412\u044b\u0439\u0442\u0438"})]}):(0,i.jsx)("button",{onClick:()=>d((e=>({...e,isOpen:!e.isOpen}))),children:(0,i.jsx)("div",{children:e})}):null]})}},566:function(e,s,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var s,r=1,n=arguments.length;r<n;r++)for(var a in s=arguments[r])Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);return e},n.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,s,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(s,r);a&&!("get"in a?!s.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return s[r]}}),Object.defineProperty(e,n,a)}:function(e,s,r,n){void 0===n&&(n=r),e[n]=s[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,s){Object.defineProperty(e,"default",{enumerable:!0,value:s})}:function(e,s){e.default=s}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(s,e,r);return t(s,e),s},i=this&&this.__rest||function(e,s){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(s,"__esModule",{value:!0});var c=l(r(43)),d=r(880),o=(0,r(744).createAnimation)("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");s.default=function(e){var s=e.loading,r=void 0===s||s,a=e.color,t=void 0===a?"#000000":a,l=e.speedMultiplier,m=void 0===l?1:l,u=e.cssOverride,h=void 0===u?{}:u,x=e.size,p=void 0===x?15:x,j=e.margin,v=void 0===j?2:j,g=i(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),f=n({display:"inherit"},h),b=function(e){return{backgroundColor:t,width:(0,d.cssValue)(p),height:(0,d.cssValue)(p),margin:(0,d.cssValue)(v),borderRadius:"100%",display:"inline-block",animation:"".concat(o," ").concat(.75/m,"s ").concat(.12*e/m,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return r?c.createElement("span",n({style:f},g),c.createElement("span",{style:b(1)}),c.createElement("span",{style:b(2)}),c.createElement("span",{style:b(3)})):null}},744:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createAnimation=void 0;s.createAnimation=function(e,s,r){var n="react-spinners-".concat(e,"-").concat(r);if("undefined"==typeof window||!window.document)return n;var a=document.createElement("style");document.head.appendChild(a);var t=a.sheet,l="\n    @keyframes ".concat(n," {\n      ").concat(s,"\n    }\n  ");return t&&t.insertRule(l,0),n}},834:(e,s,r)=>{r.d(s,{A:()=>a});var n=r(579);const a=()=>(0,n.jsx)("footer",{children:"\u0442\u0443\u0442 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c?(footer)"})},840:(e,s,r)=>{r.d(s,{A:()=>u});var n=r(43),a=r(727),t=r(3),l=r(417),i=r(953),c=r(786),d=(r(200),r(566)),o=r.n(d),m=r(579);const u=()=>{const[e,s]=(0,n.useState)(""),[r,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[x,p]=(0,c.A)(),j=(0,n.useRef)(),v=(0,n.useRef)(),g=(0,a.Zp)(),f=(0,t.wA)(),[b,{isLoading:N}]=(0,i._L)();(0,n.useEffect)((()=>{j.current.focus()}),[]),(0,n.useEffect)((()=>{h("")}),[e,r]);const y=u?"errmsg":"offscreen";if(N)return(0,m.jsx)(o(),{color:"#FFF"});return(0,m.jsxs)("section",{className:"public",children:[(0,m.jsx)("p",{ref:v,className:y,"aria-live":"assertive",children:u}),(0,m.jsxs)("form",{className:"form",onSubmit:async n=>{n.preventDefault();try{const{accessToken:n}=await b({username:e,password:r}).unwrap();f((0,l.LA)({accessToken:n})),s(""),d(""),g("/home")}catch(t){if(t.status)if(400===t.status)h("Missing Username or Password");else if(401===t.status)h("Unauthorized");else{var a;h(null===(a=t.data)||void 0===a?void 0:a.message)}else h("No Server Response")}},children:[(0,m.jsx)("label",{htmlFor:"username",children:"\u043b\u043e\u0433\u0438\u043d: "}),(0,m.jsx)("input",{className:"form__input",type:"text",id:"username",ref:j,value:e,onChange:e=>s(e.target.value),autoComplete:"off",required:!0}),(0,m.jsx)("label",{htmlFor:"password",children:"\u043f\u0430\u0440\u043e\u043b\u044c: "}),(0,m.jsx)("input",{className:"form__input",type:"password",id:"password",onChange:e=>d(e.target.value),value:r,required:!0}),(0,m.jsx)("button",{className:"form__submit-button",children:"\u0412\u043e\u0439\u0442\u0438"}),(0,m.jsxs)("label",{htmlFor:"persist",className:"form__persist",children:[(0,m.jsx)("input",{type:"checkbox",className:"form__checkbox",id:"persist",onChange:()=>p((e=>!e)),checked:x}),"\u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"]})]})]})}},880:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseLengthAndUnit=n,s.cssValue=function(e){var s=n(e);return"".concat(s.value).concat(s.unit)};var r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function n(e){if("number"===typeof e)return{value:e,unit:"px"};var s,n=(e.match(/^[0-9.]*/)||"").toString();s=n.includes(".")?parseFloat(n):parseInt(n,10);var a=(e.match(/[^0-9]*$/)||"").toString();return r[a]?{value:s,unit:a}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(s,"px.")),{value:s,unit:"px"})}}}]);
//# sourceMappingURL=63.eeca8af6.chunk.js.map